<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CCM Enterprise UI • Prototype</title>
  <link rel="icon" href="data:;base64,=">
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json">
  <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('service-worker.js')}</script>
</head>
<body>
  <div id="app" class="app shell">
    <!-- Top Bar -->
    <header class="topbar" role="banner" aria-label="Barra superiore">
      <div class="topbar__left">
        <button id="btnNav" class="icon-btn" aria-label="Mostra/Nascondi menu" title="Mostra/Nascondi menu">
          <svg class="icon" aria-hidden="true"><use href="#i-menu"/></svg>
        </button>
        <div class="brand">
          <svg class="brand__logo" aria-hidden="true"><use href="#i-cube"/></svg>
          <div class="brand__text">
            <strong>CCM Enterprise</strong>
            <span class="muted">Full Stack</span>
          </div>
        </div>
      </div>
      <div class="topbar__center">
        <form class="global-search" role="search" aria-label="Ricerca globale" onsubmit="return false">
          <svg class="icon" aria-hidden="true"><use href="#i-search"/></svg>
          <input id="globalSearch" type="search" placeholder="Cerca record, ticket, clienti…" autocomplete="off"/>
          <button class="icon-btn" aria-label="Filtri" title="Filtri">
            <svg class="icon"><use href="#i-filter"/></svg>
          </button>
        </form>
      </div>
      <div class="topbar__right">
        <button id="btnTheme" class="chip" title="Cambia tema" aria-label="Cambia tema">Tema</button>
        <div class="user">
          <svg class="avatar" aria-hidden="true"><use href="#i-user"/></svg>
          <span class="user__name">Operatore</span>
          <button class="icon-btn" aria-label="Menu utente" title="Menu utente">
            <svg class="icon"><use href="#i-caret"/></svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar" role="navigation" aria-label="Menu principale">
      <div class="sidebar__section">
        <div class="sidebar__title">Console</div>
        <button class="nav-item is-active" data-route="dashboard">
          <svg class="icon"><use href="#i-home"/></svg><span>Dashboard</span>
        </button>
        <button class="nav-item" data-route="tickets">
          <svg class="icon"><use href="#i-ticket"/></svg><span>Ticket</span>
        </button>
        <button class="nav-item" data-route="worklog">
          <svg class="icon"><use href="#i-activity"/></svg><span>Worklog</span>
        </button>
      </div>
      <div class="sidebar__section">
        <div class="sidebar__title">Anagrafiche</div>
        <button class="nav-item" data-route="accounts">
          <svg class="icon"><use href="#i-building"/></svg><span>Aziende</span>
        </button>
        <button class="nav-item" data-route="contacts">
          <svg class="icon"><use href="#i-contacts"/></svg><span>Contatti</span>
        </button>
        <button class="nav-item" data-route="assets">
          <svg class="icon"><use href="#i-assets"/></svg><span>Asset</span>
        </button>
      </div>
      <div class="sidebar__section">
        <div class="sidebar__title">Operativo</div>
        <button class="nav-item" data-route="orders">
          <svg class="icon"><use href="#i-orders"/></svg><span>Ordini</span>
        </button>
        <button class="nav-item" data-route="logistics">
          <svg class="icon"><use href="#i-truck"/></svg><span>Logistica</span>
        </button>
        <button class="nav-item" data-route="energy">
          <svg class="icon"><use href="#i-energy"/></svg><span>Energy</span>
        </button>
        <button class="nav-item" data-route="telecom">
          <svg class="icon"><use href="#i-telecom"/></svg><span>Telco</span>
        </button>
      </div>
      <div class="sidebar__section">
        <div class="sidebar__title">Amministrazione</div>
        <button class="nav-item" data-route="admin">
          <svg class="icon"><use href="#i-admin"/></svg><span>Impostazioni</span>
        </button>
      </div>
    </aside>

    <!-- Main -->
    <main id="main" class="main" role="main">
      <!-- Route: Dashboard -->
      <section id="route-dashboard" class="route is-visible" aria-labelledby="title-dashboard">
        <div class="page-header">
          <h1 id="title-dashboard">Dashboard</h1>
          <div class="actions">
            <button class="btn">
              <svg class="icon"><use href="#i-plus"/></svg> Nuovo Widget
            </button>
          </div>
        </div>
        <div class="grid">
          <div class="card kpi">
            <div class="kpi__label">Ticket Aperti</div>
            <div class="kpi__value">42</div>
            <div class="kpi__trend up">+7%</div>
          </div>
          <div class="card kpi">
            <div class="kpi__label">SLA entro termine</div>
            <div class="kpi__value">96%</div>
            <div class="kpi__trend stable">=</div>
          </div>
          <div class="card kpi">
            <div class="kpi__label">Ordini in coda</div>
            <div class="kpi__value">12</div>
            <div class="kpi__trend down">-3</div>
          </div>
          <div class="card span-2">
            <h3>Code di lavorazione</h3>
            <div class="kanban">
              <div class="kanban__col">
                <div class="kanban__title">Nuovi</div>
                <div class="kanban__item">#T-1011 - Onboarding cliente X</div>
                <div class="kanban__item">#T-1012 - Errore fatturazione</div>
              </div>
              <div class="kanban__col">
                <div class="kanban__title">In Lavorazione</div>
                <div class="kanban__item">#T-1001 - Incident rete</div>
                <div class="kanban__item">#T-1010 - Cambio piano</div>
              </div>
              <div class="kanban__col">
                <div class="kanban__title">In Attesa</div>
                <div class="kanban__item">#T-0998 - Cliente non raggiungibile</div>
              </div>
              <div class="kanban__col">
                <div class="kanban__title">Da Validare</div>
                <div class="kanban__item">#T-0988 - Ripristino completato</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Route: Tickets (Siebel/Remedy-like List/Detail) -->
      <section id="route-tickets" class="route" aria-labelledby="title-tickets">
        <div class="page-header">
          <h1 id="title-tickets">Ticket</h1>
          <div class="actions">
            <button class="btn primary" onclick="showModal('modalNewTicket')">
              <svg class="icon"><use href="#i-plus"/></svg> Nuovo Ticket
            </button>
            <button class="btn"><svg class="icon"><use href="#i-download"/></svg> Esporta</button>
          </div>
        </div>

        <div class="split">
          <div class="split__left">
            <div class="toolbar">
              <div class="filters">
                <label>Stato
                  <select>
                    <option>Tutti</option>
                    <option>Aperto</option>
                    <option>In lavorazione</option>
                    <option>Chiuso</option>
                  </select>
                </label>
                <label>Priorità
                  <select>
                    <option>Tutte</option>
                    <option>Bassa</option>
                    <option>Media</option>
                    <option>Alta</option>
                    <option>Critica</option>
                  </select>
                </label>
              </div>
              <div class="view-switch">
                <button class="chip is-active">Lista</button>
                <button class="chip">Board</button>
              </div>
            </div>
            <div class="list">
              <table class="table dense" aria-label="Elenco ticket">
                <thead>
                  <tr>
                    <th>ID</th><th>Oggetto</th><th>Cliente</th><th>Stato</th><th>Assegnato a</th><th>Scadenza</th>
                  </tr>
                </thead>
                <tbody id="ticketList">
                  <!-- rows injected by JS -->
                </tbody>
              </table>
            </div>
            <div class="pager">
              <button class="chip">&laquo;</button>
              <button class="chip is-active">1</button>
              <button class="chip">2</button>
              <button class="chip">3</button>
              <button class="chip">&raquo;</button>
            </div>
          </div>
          <div class="split__right">
            <div class="record-header">
              <div>
                <div class="breadcrumb">Ticket <span class="sep">›</span> Dettaglio</div>
                <h2 id="ticketTitle">Seleziona un ticket</h2>
              </div>
              <div class="actions">
                <button class="btn"><svg class="icon"><use href="#i-edit"/></svg> Modifica</button>
                <button class="btn danger"><svg class="icon"><use href="#i-close"/></svg> Chiudi</button>
              </div>
            </div>

            <div class="tabs" role="tablist" aria-label="Schede dettaglio">
              <button class="tab is-active" data-tab="dati">Dati</button>
              <button class="tab" data-tab="attivita">Attività</button>
              <button class="tab" data-tab="sla">SLA</button>
              <button class="tab" data-tab="storico">Storico</button>
            </div>

            <div class="tabpanels">
              <div id="tab-dati" class="tabpanel is-visible">
                <form class="form grid-2" onsubmit="return false">
                  <label>ID
                    <input id="f-id" value="" disabled/>
                  </label>
                  <label>Stato
                    <select id="f-stato">
                      <option>Aperto</option>
                      <option>In lavorazione</option>
                      <option>Chiuso</option>
                    </select>
                  </label>
                  <label>Oggetto
                    <input id="f-oggetto" />
                  </label>
                  <label>Cliente
                    <input id="f-cliente" />
                  </label>
                  <label>Priorità
                    <select id="f-prio">
                      <option>Bassa</option>
                      <option>Media</option>
                      <option>Alta</option>
                      <option>Critica</option>
                    </select>
                  </label>
                  <label>Scadenza
                    <input id="f-scadenza" type="date"/>
                  </label>
                  <label class="span-2">Descrizione
                    <textarea id="f-desc" rows="5"></textarea>
                  </label>
                </form>
              </div>

              <div id="tab-attivita" class="tabpanel">
                <div class="activity">
                  <div class="activity__item">
                    <div class="activity__meta">Oggi 09:12 • <strong>Tu</strong></div>
                    <div class="activity__text">Aggiornato stato a “In lavorazione”.</div>
                  </div>
                  <div class="activity__item">
                    <div class="activity__meta">Ieri 16:03 • <strong>Marco R.</strong></div>
                    <div class="activity__text">Richiesto log di sistema.</div>
                  </div>
                </div>
                <div class="activity__composer">
                  <input id="actText" placeholder="Aggiungi nota, @menzioni, #tag…" />
                  <button class="btn">Pubblica</button>
                </div>
              </div>

              <div id="tab-sla" class="tabpanel">
                <div class="grid">
                  <div class="card">
                    <div class="muted">Tempo di presa in carico</div>
                    <div class="kpi__value">00:12:44</div>
                  </div>
                  <div class="card">
                    <div class="muted">Tempo di risoluzione</div>
                    <div class="kpi__value">04:31:10</div>
                  </div>
                  <div class="card">
                    <div class="muted">Rischio Breach</div>
                    <div class="kpi__value">Basso</div>
                  </div>
                </div>
              </div>

              <div id="tab-storico" class="tabpanel">
                <table class="table dense">
                  <thead><tr><th>Data</th><th>Azione</th><th>Utente</th></tr></thead>
                  <tbody>
                    <tr><td>2025-08-18 11:05</td><td>Creazione ticket</td><td>Operatore</td></tr>
                    <tr><td>2025-08-18 12:22</td><td>Assegnazione</td><td>Marco R.</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Route: Accounts -->
      <section id="route-accounts" class="route" aria-labelledby="title-accounts">
        <div class="page-header">
          <h1 id="title-accounts">Aziende</h1>
          <div class="actions">
            <button class="btn"><svg class="icon"><use href="#i-plus"/></svg> Nuova Azienda</button>
          </div>
        </div>
        <div class="list">
          <table class="table dense">
            <thead><tr><th>Ragione Sociale</th><th>P.IVA</th><th>Settore</th><th>Stato</th></tr></thead>
            <tbody>
              <tr><td>Alfa S.p.A.</td><td>IT01234567890</td><td>Automotive</td><td>Attivo</td></tr>
              <tr><td>Beta Logistics</td><td>IT09876543210</td><td>Logistica</td><td>Prospect</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Route: Contacts -->
      <section id="route-contacts" class="route" aria-labelledby="title-contacts">
        <div class="page-header"><h1 id="title-contacts">Contatti</h1></div>
        <div class="list">
          <table class="table dense">
            <thead><tr><th>Nome</th><th>Cognome</th><th>Telefono</th><th>Email</th></tr></thead>
            <tbody>
              <tr><td>Giulia</td><td>Rossi</td><td>+39 02 1234</td><td>g.rossi@example.com</td></tr>
              <tr><td>Marco</td><td>Bianchi</td><td>+39 06 9876</td><td>m.bianchi@example.com</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Route: Assets -->
      <section id="route-assets" class="route" aria-labelledby="title-assets">
        <div class="page-header"><h1 id="title-assets">Asset</h1></div>
        <div class="list">
          <table class="table dense">
            <thead><tr><th>ID</th><th>Tipo</th><th>Modello</th><th>Cliente</th><th>Stato</th></tr></thead>
            <tbody>
              <tr><td>A-1001</td><td>Router</td><td>XR500</td><td>Alfa S.p.A.</td><td>Attivo</td></tr>
              <tr><td>A-1002</td><td>Contatore</td><td>SmartMtr 3</td><td>Beta Logistics</td><td>Installazione</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Placeholder routes -->
      <section id="route-worklog" class="route"><div class="page-header"><h1>Worklog</h1></div></section>
      <section id="route-orders" class="route"><div class="page-header"><h1>Ordini</h1></div></section>
      <section id="route-logistics" class="route"><div class="page-header"><h1>Logistica</h1></div></section>
      <section id="route-energy" class="route"><div class="page-header"><h1>Energy</h1></div></section>
      <section id="route-telecom" class="route"><div class="page-header"><h1>Telco</h1></div></section>
      <section id="route-admin" class="route"><div class="page-header"><h1>Impostazioni</h1></div></section>
    </main>
  </div>

  <!-- Modals -->
  <div class="modal" id="modalNewTicket" role="dialog" aria-modal="true" aria-labelledby="modalNewTicketTitle" aria-hidden="true">
    <div class="modal__panel">
      <div class="modal__header">
        <h3 id="modalNewTicketTitle">Nuovo Ticket</h3>
        <button class="icon-btn" onclick="hideModal('modalNewTicket')" aria-label="Chiudi">
          <svg class="icon"><use href="#i-close"/></svg>
        </button>
      </div>
      <div class="modal__body">
        <form class="form grid-2" onsubmit="return false">
          <label>Oggetto <input id="nt-oggetto" required/></label>
          <label>Cliente <input id="nt-cliente" required/></label>
          <label>Priorità
            <select id="nt-prio">
              <option>Media</option><option>Alta</option><option>Critica</option>
            </select>
          </label>
          <label>Scadenza <input id="nt-scadenza" type="date"/></label>
          <label class="span-2">Descrizione <textarea id="nt-desc" rows="4"></textarea></label>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn" onclick="hideModal('modalNewTicket')">Annulla</button>
        <button class="btn primary" onclick="createTicket()">Crea</button>
      </div>
    </div>
  </div>

  <!-- Inline Icons (no external deps) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="i-menu" viewBox="0 0 24 24"><path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></symbol>
    <symbol id="i-cube" viewBox="0 0 24 24"><path d="M12 2l8 4v12l-8 4-8-4V6l8-4zm0 2.2L6 6.6v.1l6 3 6-3v-.1L12 4.2zm6 5.2l-6 3-6-3v7.1l6 3 6-3V9.4z"/></symbol>
    <symbol id="i-search" viewBox="0 0 24 24"><path d="M10 2a8 8 0 105.3 14.1l4.3 4.3 1.4-1.4-4.3-4.3A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/></symbol>
    <symbol id="i-filter" viewBox="0 0 24 24"><path d="M3 5h18v2H3zm4 6h10v2H7zm3 6h4v2h-4z"/></symbol>
    <symbol id="i-home" viewBox="0 0 24 24"><path d="M3 10l9-7 9 7v10a2 2 0 01-2 2h-4v-7H9v7H5a2 2 0 01-2-2z"/></symbol>
    <symbol id="i-ticket" viewBox="0 0 24 24"><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v3a2 2 0 110 4v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3a2 2 0 110-4V7z"/></symbol>
    <symbol id="i-activity" viewBox="0 0 24 24"><path d="M3 13h4l3-8 4 14 3-6h4"/></symbol>
    <symbol id="i-building" viewBox="0 0 24 24"><path d="M4 22V4a2 2 0 012-2h8a2 2 0 012 2v18h-4v-6H8v6H4zM8 6h4v4H8z"/></symbol>
    <symbol id="i-contacts" viewBox="0 0 24 24"><path d="M4 3h14v18H4a2 2 0 01-2-2V5a2 2 0 012-2zm12 12c-1.7-1.3-3.3-2-5-2s-3.3.7-5 2v2h10v-2zm-5-4a3 3 0 110-6 3 3 0 010 6z"/></symbol>
    <symbol id="i-assets" viewBox="0 0 24 24"><path d="M3 7l9-4 9 4-9 4-9-4zm0 6l9 4 9-4M3 19l9 4 9-4"/></symbol>
    <symbol id="i-orders" viewBox="0 0 24 24"><path d="M6 2h12v4H6zM4 8h16v12H4z"/></symbol>
    <symbol id="i-truck" viewBox="0 0 24 24"><path d="M3 6h11v8H3zM14 9h5l2 3v2h-7zM6 19a2 2 0 110-4 2 2 0 010 4zm10 0a2 2 0 110-4 2 2 0 010 4z"/></symbol>
    <symbol id="i-energy" viewBox="0 0 24 24"><path d="M13 2L3 14h7l-1 8 11-12h-7z"/></symbol>
    <symbol id="i-telecom" viewBox="0 0 24 24"><path d="M12 2l9 5-9 5-9-5 9-5zm-9 7l9 5 9-5v8l-9 5-9-5V9z"/></symbol>
    <symbol id="i-admin" viewBox="0 0 24 24"><path d="M12 2a5 5 0 015 5v1h3v14H4V8h3V7a5 5 0 015-5zm-3 6h6V7a3 3 0 00-6 0v1z"/></symbol>
    <symbol id="i-plus" viewBox="0 0 24 24"><path d="M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></symbol>
    <symbol id="i-download" viewBox="0 0 24 24"><path d="M5 20h14v2H5zM11 2h2v10l3-3 1 1-5 5-5-5 1-1 3 3z"/></symbol>
    <symbol id="i-edit" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21 7.04a1 1 0 000-1.41l-2.6-2.6a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75L21 7.04z"/></symbol>
    <symbol id="i-close" viewBox="0 0 24 24"><path d="M18.3 5.71L12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.7 2.88 18.29 9.17 12 2.88 5.71 4.29 4.29l6.3 6.3 6.3-6.3z"/></symbol>
    <symbol id="i-caret" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></symbol>
    <symbol id="i-user" viewBox="0 0 24 24"><path d="M12 12a5 5 0 100-10 5 5 0 000 10zm0 2c-4 0-8 2-8 6v2h16v-2c0-4-4-6-8-6z"/></symbol>
  </svg>

  <script src="app.js"></script>
</body>
</html>
